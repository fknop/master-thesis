% !TEX root = ../thesis.tex

\documentclass[../thesis.tex]{subfiles}



\begin{document}

This chapter presents the resource allocation problem.
We first introduce the general problem and its constraints, 
the formal models are then described in \autoref{chapter:models}.

The resource allocation problem described in this thesis is a staff scheduling problem based on the needs of the \vone\ company. 
This company employs people with disabilities, they offer services to companies and private individuals such 
as industrial jobs. Working with disabled people means that there are special needs concerning
the work that each worker can do.


Our resource allocation problem consists of:

\begin{itemize}
  \item[$-$] A planning period ($T$) with each period ($t \in T$) equal in duration.
  \item[$-$] A list of clients ($c \in C$). 
  \item[$-$] A list of demands ($d \in D$).
  \item[$-$] A list of workers ($w \in W$). 
  \item[$-$] A list of skills ($s \in S$).
  \item[$-$] A list of locations ($l \in L$).
  \item[$-$] A list of machines ($m \in M$).
  \item[$-$] A list of incompatibilities between workers ($(w_1, w_2) \in I_{w} \mid w_1, w_2 \in W$).
  Two incompatible workers cannot work with each other.  
  \item[$-$] A list of incompatibilities between workers and clients ($(w, c) \in I_{wc}$).
  A worker incompatible with a client cannot work for that client.
\end{itemize}

Each demand has:

\begin{itemize}
  \item[$-$] A client ($c_d \in C$).
  \item[$-$] A given set of time periods ($T_d \subseteq T$).
  \item[$-$] A required number of workers per period ($n_d \in \mathbb{N}$).
      This number translates into $n_d$ positions in the demand. 
      $P(d)$ describes the set of positions from $0$ through $n_d - 1$. 
  \item[$-$] Some skill requirements to be fulfilled by different workers ($S_d \subseteq S$).
  It imposes that some workers have the needed capacities to work at a given position (e.g. package lifter).
  Each position $p \in P(d)$ requires the skill $s_{d,p} \in S_d$. Each skill in the set $S_d$ may represent
  multiple real-life skills. For example, if position $p$ needs to have someone who is a \emph{lifter} and a \emph{supervisor} at the same 
  time, $s_{d,p} = lifter \land supervisor$.
  \item[$-$] Additional skill requirements to be fulfilled by any workers assigned to that demand (e.g. driver license) ($S^{+}_d \subseteq S$).
  \item[$-$] A list of machines to perform the work ($M_d \subseteq M$).
  \item[$-$] An eventual list of possible locations where the demand can be performed ($L_d \subseteq L$).
  Vehicles used to drive the workers to a work location are considered as machines.
\end{itemize}


Each worker has:

\begin{itemize}
  \item[$-$] A list of skills (e.g. package lifter, supervisor, etc.) ($S_w \subseteq S$).
             A worker $w$ can only work for a demand $d$ at position $p \in P(d)$ if $s_{d,p} \in S_w$. 
  \item[$-$] A list of availabilities at which the worker can work ($T_w \subseteq T$).  
  \item[$-$] A list of working requirements ($r \in R$). A requirement $r$ states that a worker $r_w$
  needs to work for a minimum of $r_{min}$ and maximum of $r_{max}$ times in the problem planning period.  
\end{itemize}


This type of staff scheduling problem can be seen as a variant of the 
well known \emph{Nurses Scheduling Problem} (NSP) \cite{Burke2004}. 
This type of problem often contains hard constraints to state restrictions 
and soft constraints to state preferences. 




Our goal is to assign workers to multi-skill positions as well as machines and locations to a list of demands over the planning period.
Each resource (i.e. worker, machine, location) can only be assigned once per time period and needs to satisfy all the constraints stated by the demand. 
% The possible objective is to assign workers in such a way that they work for the longest time possible at the same position.

\section{Constraints}

To describe the problem constraints, we define three types of assignments:

\begin{itemize}
  \item Worker assignment: we represent this with a 4-tuple $(t, d, p, w)$ where the worker $w$ is assigned to position $p$ of demand $d$ at time $t$.
  \item Machine assignment: we represent this assignment with a 2-tuple $(d, m)$ where the machine $m$ is assigned to the 
        demand $d$ for the entire duration of that demand.
  \item Location assignment: we represent this assignment 
        with a 2-tuple $(d, l)$ where the location $l$ is assigned to the demand $d$ for the entire duration 
        of that demand.
\end{itemize}

\subsection{Hard constraints}

\subsubsection{A worker can only work when available}

Each worker has a defined set of availabilities and cannot be assigned to a demand when 
unavailable.
For each worker assignment $(t, d, p, w)$, $t \in T_w$.

\subsubsection{No worker should be assigned to a demand which is not occurring}

A demand has a set of time periods in which it occurs,
no workers should be assigned to that demand if the demand is not 
occurring. 
For each worker assignment $(t, d, p, w)$, $t \in T_d$.

\subsubsection{No worker can be assigned twice for the same period} 

A worker cannot do the work of two different workers at the same time.
Hence, a worker can only work at most once per time period.
For every two worker assignments $(t_1, d_1, p_1, w_1)$ and $(t_2, d_2, p_2, w_2)$, if $t_1 = t_2$ then $w_1 \neq w_2$.

\subsubsection{Each demand has a required number of workers}

Each demand needs a number of workers to be satisfied. 
For each time period in which a demand is occurring, it should have the required 
number of workers assigned to it.
For each demand $d$, there exists $n_d$ worker assignments. 
For every two assignments for $d$, $(t_1, d, p_1, w_1)$ and $(t_2, d, p_2, w_2)$: if $t_1 = t_2$ then $p_1 \neq p_2$.

\subsubsection{Each assignment must respect skill restrictions}

Each position of a demand might require skills to be satisfied. 
To be assigned to that position, a worker must have the required skills. 
A worker can also have more skills than the required skills by the position.
For each assignment $(t, d, p, w)$, $s_{d,p} \in S_w$.

\subsubsection{Worker-worker incompatibilities}

Workers might be incompatible with each other. Such workers cannot
be assigned together at the same time period.
For each incompatibility $(w_1, w_2) \in I_{w_1w_2}$ and for each worker assignments for time $t$ and demand $d$,
there cannot exist two assignments $(t, d, p_1, w_1)$ and $(t, d, p_2, w_2)$.

\subsubsection{Worker-client incompatibilities}

A worker and a client might be incompatible with each other. 
If this is the case, the worker must not be assigned at a demand for such client.
For each incompatibility $(w, c) \in I_{wc}$, there cannot exist any worker assignments $(t, d, p, w)$ where 
$c_d = c$.

\subsubsection{The required machines must always be assigned}

A demand has machine needs. Such machines should always be assigned 
for a demand to be satisfied.
For each required machine, there must exist one machine assignment $(d, m)$ where $m$ is the required machine.


\subsubsection{No machines should be assigned twice for the same period}

A machine is assigned for the entirety of a demand. Moreover, it cannot be assigned twice 
for the same period. In other words, it cannot be assigned for two overlapping (in time) demands.
For every two machine assignments $(d_1, m_1)$ and $(d_2, m_2)$, if $m_1 = m_2$ then $d_1$ cannot overlap with $d_2$
($T_{d_1} \cap T_{d_2} = \varnothing $).


\subsubsection{The location assigned must be in the set of possible locations}

A demand has a set of possible locations. Only one of those locations can be assigned 
to that demand.
For each assignment $(d, l)$, $l \in L_d$.

\subsubsection{No location should be assigned twice for the same period}

As with machines, locations must be assigned only once per time period.
For every two location assignments $(d_1, l_1)$ and $(d_2, l_2)$, if $l_1 = l_2$ then $d_1$ cannot overlap with $d_2$
($T_{d_1} \cap T_{d_2} = \varnothing $).


\subsection{Soft constraints}

\subsubsection{Satisfy the most assignments possible}

A demand might not have enough workers or have impossible constraints. We need to be able to have 
a final result in which the worker assignments are all fulfilled.
For this to happen, we can assign a dummy worker to positions and minimize the number of times this dummy worker is 
assigned. This dummy worker can work at every time period, has every skills, 
and can work as many times as possible even in the same time period.


\subsubsection{Contiguous shifts}

A demand has multiple positions and these positions should keep the same worker over time to avoid the hassle for the workers of changing positions. In practice,
this is an unreal requirement as not every worker will be available for the entire duration of the demand. 
We instead minimize the number of different workers over time for each position.

\subsubsection{Working requirements}

Workers can have minimum and maximum working requirements. We want to make sure 
that these requirements are satisfied. However, as this is not always possible to solve, we 
state this as a soft constraint and minimize the number of times a requirement is not met.

\end{document}

