% !TEX root = ../../thesis.tex

\documentclass[../../thesis.tex]{subfiles}
 
\begin{document}


\section{Mixed Integer Programming Model}

We first start by presenting the mathematical model, we describe the variables
needed to model our problem and the constraints associated to them.

\subsection{Variables}

To represent our problem in MIP, we will need three types of variables, one per resource.



\begin{equation*}
\begin{split}
    w_{ijkl} &=  \left \{
                   \begin{array}{l l}
                      1 \quad & \textrm{if worker $i$ is working at time $j$ for demand $k$ at position $l$} \\
                      0 \quad & \textrm{otherwise} 
                   \end{array}
                   \right . \\
   m_{ij} &=  \left \{
                   \begin{array}{l l}
                      1 \quad & \textrm{if machine $i$ is used for demand $j$} \\
                      0 \quad & \textrm{otherwise} 
                   \end{array}
                   \right . \\
    z_{ij} &= \left \{
               \begin{array}{l l}
                  1 \quad & \textrm{if zone $i$ is used for demand $j$} \\
                  0 \quad & \textrm{otherwise} 
               \end{array}
               \right . \\
\end{split}
\end{equation*}

This is in fact a binary Integer Programming model as every variables is a $\{0, 1\}$ integer.

\subsection{Complete Model}

\begin{align}
    \textrm{min} \quad & \sum_{k \in D} \sum_{l \in d^P_k} \sum_{i \in W} min(\sum_{j \in T} w_{ijkl}, 1) & \label{obj} \\ 
    \textrm{s.t} \quad & \sum_{i \in W} w_{ijkl} = 1, && \forall k \in D, j \in d_k^T, l \in d_k^P \label{wc1} \\
    & \sum_{k \in D} \sum_{l \in d_k^P} w_{ijkl} \leq 1, && \forall i \in W, j \in T \label{wc2} \\
    & t_j \notin d^T_{k} \implies \forall i, l \ w_{ijkl} = 0,  & &\forall j \in T , k \in D \label{wc3} \\
    & t_j \notin w^T_{i} \implies \forall k, l \ w_{ijkl} = 0, && \forall j \in T, i \in W \label{wc4} \\ 
    & \sum_{l \in d^P_k} w_{ajkl} + w_{bjkl} < 2, &&  \forall {(a, b) \in I_{ww}}, j \in T, k \in D \label{wc5} \\
    & d^c_{k} = c \implies \forall l \ w_{ijkl} = 0, && \forall {(i, c) \in I_{wc}}, j \in T, k \in D \label{wc6} \\ 
    & w_{ijkl} = 0, && \forall j \in T, k \in D, l \in d^P_k, \label{wc7} \\
    & && i \in W \setminus W_{d^{s_l}_k} \nonumber\\
    & \sum_{l \in d_k^P} w_{ijkl} \geq 1, && \forall j \in T, k \in D, s \in d^{S^+}_k, i \in W_{d^{S^+}_k} \label{wc8} \\ 
    & z_i \notin d^Z_j \implies z_{ij} = 0, && \forall i \in Z, j \in D \label{zc1}  \\
    & |d^Z_j| > 0 \implies \sum_{i \in Z} z_{ij} = 1, && \forall j \in D \label{zc2} \\
    & z_{ij} + z_{ik} \leq 1, && \forall j \in D, k \in d^O_j, i \in Z \label{zc3} \\
    & m_i \notin d^M_j \implies m_{ij} = 0, && \forall i \in M, j \in D  \label{mc1} \\
    & \sum_{i \in M_k} m_{ij} = |d^{M_k}_j|, && j \in D, k \in d^M_j  \label{mc2} \\
    & m_{ij} + m_{ik} \leq 1, && \forall j \in D, k \in d^O_j, i \in M  \label{mc3} \\
    & w_{ijkl} \in \{0, 1\}, && \forall i \in W, j \in T, k \in D, l \in d^P_k \label{binary1} \\
    & m_{ij} \in \{0, 1\}, && \forall i \in M, j \in D \label{binary2} \\ 
    & z_{ij} \in \{0, 1\}, && \forall i \in Z, j \in D \label{binary3}
\end{align}
    
The objective function is stated in (\ref{obj}), it minimizes the number of different workers for every position between periods of that demand. $min(\sum_{j \in T} w_{ijkl}, 1)$ is one if the worker $i$ is working for that position at that time, 0 otherwise. Hence, the sum of that value for all worker will be equal to the number of worker for that shift.


Constraint (\ref{wc1}) ensures that each position is filled by only one worker. Constraint (\ref{wc2}) ensures that no worker works for multiple demands at the same time period. The constraints (\ref{wc3}) and (\ref{wc4}) ensures that no worker is working for a demand that is not occurring or when is himself not available. Constraint (\ref{wc5}) ensures that no incompatible workers work together while (\ref{wc6}) ensures that no incompatible pair of worker and client work together. Constraint (\ref{wc7}) ensures that no worker work for a position in which they are not qualified to work at. 
Constraint (\ref{wc8}) ensures that for each additional skills, at least one worker in the group has that skill.

Constraint (\ref{zc1}) ensures that no zone is assigned to a demand in which this zone is not a possible assignment. (\ref{zc2}) ensures that only one zone is assigned to this demand if this demand is in need of a zone. Constraint (\ref{zc3}) ensures that no zone is assigned to two overlapping demands in time.

Constraint (\ref{mc1}) ensures that no machine is assigned to a demand not in need of that machine. Constraint (\ref{mc2}) ensures that the required number for each machine is satisfied. And again, (\ref{mc3}) ensures that no machine is assigned to two overlapping demands in time.


Finally (\ref{binary1}), (\ref{binary2}) and (\ref{binary3}) ensure the variables only takes binary values.


\end{document}

